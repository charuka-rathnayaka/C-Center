<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script> 
    <link rel="icon" type="image/x-icon" href="/assets/img/fast_cart.png" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
     <link href="/css/loginstyles.css" rel="stylesheet" />
    <title>Register!</title>

    
  </head>
 <body>
  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-xl-9 mx-auto">
        <div class="card card-signin flex-row my-5">
          <div class="card-img-left d-none d-md-flex">
             <!-- Background image for card set in CSS! -->
          </div>
          <div class="card-body">
            <h5 class="card-title text-center">Register</h5>
            <form class="form-signin" method="POST" onSubmit="return validate_register()">
              

              <div class="form-label-group">
                <input type="text" id="firstName" class="form-control" placeholder="First Name" name='firstname' required>
                <label for="firstName">First Name</label>
                 <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='firstName_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>

              <div class="form-label-group">
                <input type="text" id="lastName" class="form-control" placeholder="Last Name" name='lastname' required>
                <label for="lastName">Last Name</label>
                 <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='lastName_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>


              <div class="form-label-group">
                <input type="email" id="inputEmail" class="form-control" placeholder="Email address" name='email' required>
                <label for="inputEmail">Email address</label>
                 <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='email_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>

               <div class="form-label-group">
                <input type="text" id="address" class="form-control" placeholder="Address" name='address' required>
                <label for="address">Address</label>
                 <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='address_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>

              <div class="form-label-group">
                 <select class="form-select" id="city" name='city' required >
                    <option selected disabled value="">City...</option>
                    {{#each cities}}
                        <option value={{{this.cityCode}}}>{{this.cityName}}</option>
                    {{/each}}
                    
                </select>
               
                 <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='city_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>
              

               <div class="form-label-group">
                <input type="date" class="form-control" id="birthday" name='birthday' required >
                <label for="birthday">BirthDay</label>
                 <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='birthday_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>

              <div class="form-label-group">
                <input type="tel" class="form-control" id="contactNumber" name='contactnumber' placeholder="012-3456789" pattern="[0-9]{3}-[0-9]{7}" required >
                  <label for="contactNumber">Contact Number: 012-3456789</label>
                 <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='contactNumber_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>
              

              <div class="form-label-group">
                <input type="password" id="inputPassword" class="form-control" placeholder="Password" name='password1'required>
                <label for="inputPassword">Password</label>
                <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='password_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>

               <div class="form-label-group">
                <input type="password" id="password2" class="form-control" placeholder="Password" name='password2'required>
                <label for="password2">Confirm Password</label>
                <div class="row">
                    <div class="col-1"></div>
                    <div class="col">
                        <span  id='password2_message' style="color: red;"></span>
                    </div>
                 </div>
              </div>



               <div class="row justify-content-md-center">
                    
                    <div class="col-md-auto">
                        <span  id='error_message' style="color: red;">{{errors}}</span>
                    </div>
                 </div>
                
                 <br>



              
              <div class="row justify-content-md-center">
                  <div class="col-md-auto">
                <button type="submit" class="btn btn-lg btn-primary btn-block text-uppercase" formaction="/customer/auth/register" >Register</button>
                </div>
              </div>
              <br>
              <div class="row justify-content-md-center">
                  <div class="col-md-auto">
                    <p class="text-whitesmoke text-center">Already have an account?</p></div>
              <div class="col-md-auto">
                    <a class="text-darkyellow" href="/login"><small>Sign In</small></a>
              </div>
              <hr class="my-4">
               <p class="margin-t text-whitesmoke-right"><small> C-Center &copy; 2021</small> </p>
            </form>
            
      
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
      
function validate_register(){
        //console.log("in fun");
         $("#email_message").empty();
          $("#password_message").empty();
        $("#firstName_message").empty();
        $("#lastName_message").empty();
        $("#city_message").empty();
        $("#address_message").empty();
        $("#password2_message").empty();
        $("#contactNumber_message").empty();
        $("#birthday_message").empty();
        console.log('emptiess')
        
        
       var email =document.getElementById("inputEmail").value;
       var firstName =document.getElementById("firstName").value;
       var lastName =document.getElementById("lastName").value;
       var city =document.getElementById("city").value;
       var address =document.getElementById("address").value;
       
       
       var contactNumber =document.getElementById("contactNumber").value;
       var password2 =document.getElementById("password2").value;
       var password1 =document.getElementById("inputPassword").value;
       var birthday =document.getElementById("birthday").value;
       var is_valid=true;
       var mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        
       
       if(!email.match(mailformat)){
           is_valid=false;
           $('#email_message').html("Invalid Email. Please Enter a valid Email");
       }
        if(password1.length<4){
            is_valid=false;
           $('#password_message').html("Invalid Password. Please Enter a valid Password");
        }
        if(password2.length<4){
            is_valid=false;
           $('#password2_message').html("Invalid Password. Please Enter a valid Password");
        }
        if(password1!=password2){
            is_valid=false;
           $('#password2_message').html("Invalid. Password and confirmation should be same");
        }
        if(firstName.length<3){
            is_valid=false;
           $('#firstName_message').html("Invalid FirstName. Firstname must contain at least 3 characters");

        }
        
        if(city.length<1){
            is_valid=false;
           $('#city_message').html("Invalid Input. Please Select a City");
        }
        if(address.length<5){
            is_valid=false;
           $('#address_message').html("Invalid Input. Please enter a valid address");
        }
        if(birthday.length<4){
            is_valid=false;
           $('#birthday_message').html("Invalid Input. Please Enter Birthday in Correct Format");
        }
        if(contactNumber.length<11){
            is_valid=false;
           $('#contactNumber_message').html("Invalid Input. Please Enter Contact number in Correct Format");
        }
        if(lastName.length<3){
            is_valid=false;
           $('#lastName_message').html("Invalid LastName. Lastname must contain at least 3 characters");

        }
        if(is_valid==false){
            return false;
        }
        else{
            return true;
        }
    }

     $(function () {
        var dtToday = new Date();
         
        var month = dtToday.getMonth() + 1;
        var day = dtToday.getDate();
        var year = dtToday.getFullYear()-5;
        if (month < 10)
          month = '0' + month.toString();
        if (day < 10)
          day = '0' + day.toString();

        var maxDate = year + '-' + month + '-' + day;

        $('#birthday').attr('max', maxDate);
      });
  </script>

  
  
</body>

</html>